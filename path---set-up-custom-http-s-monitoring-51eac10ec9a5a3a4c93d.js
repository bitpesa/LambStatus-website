webpackJsonp([0xeb540a2b32b2],{1002:function(t,e){t.exports={data:{allPostTitles:{edges:[{node:{frontmatter:{title:"Contributing",group:"Internals",type:"doc"},fields:{slug:"/contributing"}}},{node:{frontmatter:{title:"Cost Estimate",group:"Internals",type:"doc"},fields:{slug:"/cost-estimate"}}},{node:{frontmatter:{title:"Create a New Admin User",group:"Advanced Usage",type:"doc"},fields:{slug:"/create-a-new-admin-user"}}},{node:{frontmatter:{title:"Get Started",group:"Basic Usage",type:"doc"},fields:{slug:"/get-started"}}},{node:{frontmatter:{title:"Set up Custom Domain",group:"Advanced Usage",type:"doc"},fields:{slug:"/set-up-custom-domain"}}},{node:{frontmatter:{title:"Integrate with Other Monitoring Systems",group:"Advanced Usage",type:"doc"},fields:{slug:"/integrate-with-other-monitoring-systems"}}},{node:{frontmatter:{title:"Set up Custom HTTP(S) Monitoring",group:"Advanced Usage",type:"doc"},fields:{slug:"/set-up-custom-http-s-monitoring"}}},{node:{frontmatter:{title:"Set up the development environment",group:"Internals",type:"doc"},fields:{slug:"/set-up-the-development-environment"}}},{node:{frontmatter:{title:"Supported AWS Regions",group:"Basic Usage",type:"doc"},fields:{slug:"/supported-aws-regions"}}},{node:{frontmatter:{title:"Upgrading LambStatus",group:"Basic Usage",type:"doc"},fields:{slug:"/upgrading-lamb-status"}}},{node:{frontmatter:{title:"Set up Email Notification",group:"Advanced Usage",type:"doc"},fields:{slug:"/set-up-email-notification"}}}]},postBySlug:{html:'<p>LambStatus doesn’t support custom HTTP(S) endpoint monitoring out-of-the box. This guide describes how to set up serverless HTTP(S) monitoring with AWS Lambda and AWS CloudWatch. Monitoring data collected this way can be displayed in LambStatus. The guide uses the <a href="https://github.com/wmnnd/lambda-watchtower">lambda-watchtower</a> script but can easily be adapted to any custom monitoring script.</p>\n<p>\n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 790px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 49.868073878627975%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABGElEQVQoz5WQXW+DIBSG+f8/bBdrL3exRla7FbFSjnyJiigMdE2adlmyJ2/g4QVuDupW7MqyLPGG977rxw2zPjAm7R1jTCmltU4rmlaCYfH/ID+5KD7j6SUCjhxH+MjRddQ0S3uKkmRXJEtbRsujPEdzyZ/DMrd4B3gv8GuSdl0B79KR4z3kJvsWuLn8esufQRmhNLRCSqkF59AqbUY3dbbvh3ETm8z5e0l7GhAaDTgrtoGlbpN5nkMI6Tr8CWqunFzgXNGyLOu6vq70/c+gh2FI4/S/4ZxDVUXfD4eiKAghlNKmadiN1ByPx/vmHgBAonOnilGujAsPYdLWXAo7PV+l2GlBV+MJdMxM0IeHNNpVYJ/7LWpYvgFUNjg3h/FrlwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="Cloud Watch Metrics"\n        title=""\n        src="/static/CloudWatchMetrics-f5575d6cb9c02bd8cd0e9586d758cf51-ffc88.png"\n        srcset="/static/CloudWatchMetrics-f5575d6cb9c02bd8cd0e9586d758cf51-d16f8.png 198w,\n/static/CloudWatchMetrics-f5575d6cb9c02bd8cd0e9586d758cf51-f21b1.png 395w,\n/static/CloudWatchMetrics-f5575d6cb9c02bd8cd0e9586d758cf51-ffc88.png 790w,\n/static/CloudWatchMetrics-f5575d6cb9c02bd8cd0e9586d758cf51-be30e.png 1137w"\n        sizes="(max-width: 790px) 100vw, 790px"\n      />\n    </span>\n  </span>\n  </p>\n<h3 id="create-an-iam-role"><a href="#create-an-iam-role" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create an IAM Role</h3>\n<p>Before setting up monitoring, an IAM Role with the permissions to store CloudWatch metrics needs to be set up.</p>\n<ol>\n<li>Open the <a href="https://console.aws.amazon.com/iam/">IAM service</a> dashboard, select <em>Policies</em> from the left-hand menu. Create the following policy and give it a suitable name (e. g. CloudWatch-putMetricDataPermission”):</li>\n</ol>\n<div class="gatsby-highlight">\n      <pre class="language-json"><code><span class="token punctuation">{</span>\n\t<span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2012-10-17"</span><span class="token punctuation">,</span>\n\t<span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t<span class="token punctuation">{</span>\n\t\t\t<span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>\n\t\t\t<span class="token property">"Action"</span><span class="token operator">:</span> <span class="token string">"cloudwatch:PutMetricData"</span><span class="token punctuation">,</span>\n\t\t\t<span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"*"</span>\n\t\t<span class="token punctuation">}</span>\n\t<span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<ol start="2">\n<li>Select <em>Roles</em> from the left-hand menu. Create a new role  (e. g. named “watchtower-role”) with Lambda as the target service and attach the policy created in the previous step.</li>\n</ol>\n<h3 id="create-a-monitoring-function"><a href="#create-a-monitoring-function" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create a Monitoring Function</h3>\n<p>Now the function that performs the HTTP(S) monitoring needs to be set up on Lambda.</p>\n<ol>\n<li>Open the <a href="https://console.aws.amazon.com/lambda/">Lambda dashboard</a>, click on “Create a function”, enter a name (e. g. named “Watchtower-ping”), select the Node.js runtime and the IAM role created earlier. Confirm with “Create function”.</li>\n<li>Insert the contents of <code>index.js</code> from the <a href="https://github.com/wmnnd/lambda-watchtower">lambda-watchtower GitHub repository</a> into the Lambda script editor.</li>\n<li>Save the new function by clicking on “Save”.</li>\n</ol>\n<h3 id="configuring-a-cloudwatch-rule"><a href="#configuring-a-cloudwatch-rule" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuring a CloudWatch Rule</h3>\n<p>Finally, CloudWatch needs to be configured to call the Watchtower Lambda function every five minutes.</p>\n<ol>\n<li>Open the <a href="https://console.aws.amazon.com/cloudwatch/">CloudWatch Dashboard</a>, click on “Rules” in left-hand menu. Then select “Create rule” and select the “Schedule” event source.</li>\n<li>Pick an execution interval for the monitoring script. Five minutes is usually a good choice here to avoid additional fees for CloudWatch.</li>\n<li>Click on “Add target” and select the Lambda function created earlier.</li>\n<li>Click on “Configure input” and select “Constant (JSON text)”. Now insert the options with the Watchtower script should be executed. Here is an example configuration:</li>\n</ol>\n<div class="gatsby-highlight">\n      <pre class="language-json"><code><span class="token punctuation">{</span>\n\t<span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t<span class="token punctuation">{</span>\n\t\t\t<span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://www.example.com"</span><span class="token punctuation">,</span>\n\t\t\t<span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"example.com"</span>\n\t\t<span class="token punctuation">}</span>\n\t<span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t<span class="token property">"timings"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"readable"</span><span class="token punctuation">,</span> <span class="token string">"total"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t<span class="token property">"timeout"</span><span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>\n\t<span class="token property">"namespace"</span><span class="token operator">:</span> <span class="token string">"Watchtower"</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>All available options are listed in the <a href="https://github.com/wmnnd/lambda-watchtower/blob/master/README.md">Watchtower README</a>.</p>\n<ol start="5">\n<li>Confirm by clicking on “Configure details”, name the rule and save it with a click on “Create rule”.</li>\n</ol>\n<hr>\n<h3 id="thats-it"><a href="#thats-it" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>That’s it!</h3>\n<p>Wait until the monitoring script has been called at least once. You can now add the new metrics to your status page from the LambStatus admin page.</p>',timeToRead:2,excerpt:"LambStatus doesn’t support custom HTTP(S) endpoint monitoring out-of-the box. This guide describes how to set up serverless HTTP(S…",frontmatter:{title:"Set up Custom HTTP(S) Monitoring"},fields:{slug:"/set-up-custom-http-s-monitoring"}}},pathContext:{slug:"/set-up-custom-http-s-monitoring"}}}});
//# sourceMappingURL=path---set-up-custom-http-s-monitoring-51eac10ec9a5a3a4c93d.js.map